<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Horas App</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#111">

<style>
body{font-family:Arial;background:#111;color:#fff;text-align:center;padding:30px}
button{padding:20px;font-size:20px;width:100%;margin-top:20px}
</style>
</head>
<body>

<h2 id="estado">Listo para iniciar</h2>
<button id="btn">INICIAR</button>

<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}

let inicio = localStorage.getItem("inicio");

function actualizar() {
  if (inicio) {
    let min = Math.floor((Date.now() - inicio) / 60000);
    document.getElementById("estado").innerText =
      "Tiempo: " + min + " min";
    document.getElementById("btn").innerText = "FINALIZAR";
  }
}

actualizar();
setInterval(actualizar, 1000);

document.getElementById("btn").onclick = () => {
  if (!inicio) {
    inicio = Date.now();
    localStorage.setItem("inicio", inicio);
  } else {
    let horas = Math.round(((Date.now() - inicio) / 3600000) * 2) / 2;
    alert("Horas redondeadas: " + horas);
    localStorage.removeItem("inicio");
    inicio = null;
    document.getElementById("estado").innerText = "Listo para iniciar";
    document.getElementById("btn").innerText = "INICIAR";
  }
};
</script>

</body>
  </html>
